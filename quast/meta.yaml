{% set version = "5.0.2" %}
{% set hash = "2b31aac010f5c04d5367f1bf718516ae" %}

package:
  name: quast
  version: {{ version }}

build:
  number: 2
  # Needs to adjust cgi.escape to be html.escape for Python 3.8.
  # (cgi.escape is deprecated since 3.2)
  # AttributeError: module 'cgi' has no attribute 'escape'
  skip: True  # [py>=38]
  string: py_olc

source:
  url:
    - https://github.com/ablab/quast/releases/download/quast_{{ version }}/quast-{{ version }}.tar.gz
    - http://downloads.sourceforge.net/project/quast/quast-{{ version }}.tar.gz
  md5: {{ hash }}
#  patches:
#    - genemark-issue_disable-and-exclude-from-package.patch
#    - skip-glimmer-in-test.patch
#    - remove-explicit-dependencies-from-setup-py.patch

requirements:
  build:
    - {{ compiler('c') }}    
  host:
    - blast=2.12.0=hf3cf87c_4
    - circos=0.69.8=hdfd78af_1
    - glimmerhmm=3.0.4=h2d50403_2
    - joblib=1.1.0=pyhd8ed1ab_0
    - matplotlib-base=3.5.1=py39h2fa2bec_0
    - minimap2=2.24=h7132678_1
    - perl=5.32.1=2_h7f98852_perl5
    - pip=20.2.3=py_0
    - python=3.9.12=h9a8a25e_1_cpython
    - setuptools=62.1.0=py39hf3d152e_0
    - simplejson=3.17.6=py39hb9d737c_1
    - zlib=1.2.11=h166bdaf_1014
  run:
    - blast=2.12.0=hf3cf87c_4
    - circos=0.69.8=hdfd78af_1
    - glimmerhmm=3.0.4=h2d50403_2
    - joblib=1.1.0=pyhd8ed1ab_0
    - matplotlib-base=3.5.1=py39h2fa2bec_0
    - minimap2=2.24=h7132678_1
    - openjdk=11.0.9.1=h5cc2fde_1
    - perl=5.32.1=2_h7f98852_perl5
    - python=3.9.12=h9a8a25e_1_cpython
    - simplejson=3.17.6=py39hb9d737c_1
    - zlib=1.2.11=h166bdaf_1014

#test:
#  source_files:
#    - test_data
#  commands:
#    - quast --version
#    - metaquast --version

about:
  home: http://quast.sourceforge.net/
  license: Custom
  license_file: LICENSE.txt
  summary: Quality Assessment Tool for Genome Assemblies

extra:
  container:
    # ascii fallback fails without locale
    extended-base: true
  notes: |
    - GeneMark gene prediction software is disabled due to licensing issues
  identifiers:
    - biotools:quast
    - doi:10.1093/bioinformatics/btt086

